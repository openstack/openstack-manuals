..
    Warning: Do not edit this file. It is automatically generated from the
    software project's code and your changes will be overwritten.

    The tool to generate this file lives in openstack-doc-tools repository.

    Please make any changes needed in the code, then run the
    autogenerate-config-doc tool from the openstack-doc-tools repository, or
    ask for help on the documentation mailing list, IRC channel or meeting.

.. _nova-metadata:

.. list-table:: Description of metadata configuration options
   :header-rows: 1
   :class: config-ref-table

   * - Configuration option = Default value
     - Description
   * - **[DEFAULT]**
     -
   * - ``metadata_cache_expiration`` = ``15``
     - (Integer) This option is the time (in seconds) to cache metadata. When set to 0, metadata caching is disabled entirely; this is generally not recommended for performance reasons. Increasing this setting should improve response times of the metadata API when under heavy load. Higher values may increase memory usage, and result in longer times for host metadata changes to take effect.
   * - ``metadata_host`` = ``$my_ip``
     - (String) This option determines the IP address for the network metadata API server.

       Possible values:

       * Any valid IP address. The default is the address of the Nova API server.

       Related options:

       * metadata_port
   * - ``metadata_listen`` = ``0.0.0.0``
     - (String) The IP address on which the metadata API will listen.
   * - ``metadata_listen_port`` = ``8775``
     - (Port number) The port on which the metadata API will listen.
   * - ``metadata_manager`` = ``nova.api.manager.MetadataManager``
     - (String) DEPRECATED: OpenStack metadata service manager
   * - ``metadata_port`` = ``8775``
     - (Port number) This option determines the port used for the metadata API server.

       Related options:

       * metadata_host
   * - ``metadata_workers`` = ``None``
     - (Integer) Number of workers for metadata service. The default will be the number of CPUs available.
   * - ``vendordata_driver`` = ``nova.api.metadata.vendordata_json.JsonFileVendorData``
     - (String) DEPRECATED: When returning instance metadata, this is the class that is used for getting vendor metadata when that class isn't specified in the individual request. The value should be the full dot-separated path to the class to use.

       Possible values:

       * Any valid dot-separated class path that can be imported.
   * - ``vendordata_dynamic_connect_timeout`` = ``5``
     - (Integer) Maximum wait time for an external REST service to connect.

       Possible values:

       * Any integer with a value greater than three (the TCP packet retransmission timeout). Note that instance start may be blocked during this wait time, so this value should be kept small.

       Related options:

       * vendordata_providers

       * vendordata_dynamic_targets

       * vendordata_dynamic_ssl_certfile

       * vendordata_dynamic_read_timeout
   * - ``vendordata_dynamic_read_timeout`` = ``5``
     - (Integer) Maximum wait time for an external REST service to return data once connected.

       Possible values:

       * Any integer. Note that instance start is blocked during this wait time, so this value should be kept small.

       Related options:

       * vendordata_providers

       * vendordata_dynamic_targets

       * vendordata_dynamic_ssl_certfile

       * vendordata_dynamic_connect_timeout
   * - ``vendordata_dynamic_ssl_certfile`` =
     - (String) Path to an optional certificate file or CA bundle to verify dynamic vendordata REST services ssl certificates against.

       Possible values:

       * An empty string, or a path to a valid certificate file

       Related options:

       * vendordata_providers

       * vendordata_dynamic_targets

       * vendordata_dynamic_connect_timeout

       * vendordata_dynamic_read_timeout
   * - ``vendordata_dynamic_targets`` =
     - (List) A list of targets for the dynamic vendordata provider. These targets are of the form <name>@<url>.

       The dynamic vendordata provider collects metadata by contacting external REST services and querying them for information about the instance. This behaviour is documented in the vendordata.rst file in the nova developer reference.
   * - ``vendordata_jsonfile_path`` = ``None``
     - (String) Cloud providers may store custom data in vendor data file that will then be available to the instances via the metadata service, and to the rendering of config-drive. The default class for this, JsonFileVendorData, loads this information from a JSON file, whose path is configured by this option. If there is no path set by this option, the class returns an empty dictionary.

       Possible values:

       * Any string representing the path to the data file, or an empty string (default).
   * - ``vendordata_providers`` =
     - (List) A list of vendordata providers.

       vendordata providers are how deployers can provide metadata via configdrive and metadata that is specific to their deployment. There are currently two supported providers: StaticJSON and DynamicJSON.

       StaticJSON reads a JSON file configured by the flag vendordata_jsonfile_path and places the JSON from that file into vendor_data.json and vendor_data2.json.

       DynamicJSON is configured via the vendordata_dynamic_targets flag, which is documented separately. For each of the endpoints specified in that flag, a section is added to the vendor_data2.json.

       For more information on the requirements for implementing a vendordata dynamic endpoint, please see the vendordata.rst file in the nova developer reference.

       Possible values:

       * A list of vendordata providers, with StaticJSON and DynamicJSON being current options.

       Related options:

       * vendordata_dynamic_targets

       * vendordata_dynamic_ssl_certfile

       * vendordata_dynamic_connect_timeout

       * vendordata_dynamic_read_timeout
